import express from 'express';
import cors from 'cors';
import { createErrorHandler } from './helpers/createErrorHandler.js';
export const createServer = ({ routes = [], middleware = [], onError, corsOptions = {}, }) => {
    const app = express();
    app.use(cors(corsOptions));
    // Add default body parsers
    app.use(express.json());
    app.use(express.urlencoded({ extended: true }));
    middleware.forEach((mw) => app.use(mw));
    routes.forEach(({ path, method, requestHandler }) => {
        app[method](path, requestHandler);
    });
    app.use(createErrorHandler(onError));
    return app;
};
// Export runtime values
export { RequestMethod } from './valueTypes.js';
export { createErrorHandler } from './helpers/createErrorHandler.js';
export { httpError } from './helpers/httpError.js';
